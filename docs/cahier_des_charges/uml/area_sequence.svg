<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="811px" preserveAspectRatio="none" style="width:905px;height:811px;" version="1.1" viewBox="0 0 905 811" width="905px" zoomAndPan="magnify"><defs><filter height="300%" id="fz7syh0ll46by" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><text fill="#000000" font-family="sans-serif" font-size="18" lengthAdjust="spacingAndGlyphs" textLength="335" x="280.5" y="29.2419">AREA Creation and Execution Sequence</text><rect fill="#FFFFFF" filter="url(#fz7syh0ll46by)" height="197.218" style="stroke: #000000; stroke-width: 2.0;" width="439" x="444" y="507.3499"/><rect fill="#FFFFFF" filter="url(#fz7syh0ll46by)" height="114.8241" style="stroke: #000000; stroke-width: 2.0;" width="419" x="454" y="534.056"/><rect fill="#FFFFFF" height="48.6879" style="stroke: none; stroke-width: 1.0;" width="439" x="444" y="655.88"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="26" x2="26" y1="127.5838" y2="721.5679"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="173" x2="173" y1="127.5838" y2="721.5679"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="494" x2="494" y1="127.5838" y2="721.5679"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="693" x2="693" y1="127.5838" y2="721.5679"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="800" x2="800" y1="127.5838" y2="721.5679"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="31" x="8" y="123.4818">User</text><ellipse cx="26.5" cy="51.5158" fill="#FEFECE" filter="url(#fz7syh0ll46by)" rx="8" ry="8" style="stroke: #A80036; stroke-width: 2.0;"/><path d="M26.5,59.5158 L26.5,86.5158 M13.5,67.5158 L39.5,67.5158 M26.5,86.5158 L13.5,101.5158 M26.5,86.5158 L39.5,101.5158 " fill="none" filter="url(#fz7syh0ll46by)" style="stroke: #A80036; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="31" x="8" y="735.5339">User</text><ellipse cx="26.5" cy="749.6358" fill="#FEFECE" filter="url(#fz7syh0ll46by)" rx="8" ry="8" style="stroke: #A80036; stroke-width: 2.0;"/><path d="M26.5,757.6358 L26.5,784.6358 M13.5,765.6358 L39.5,765.6358 M26.5,784.6358 L13.5,799.6358 M26.5,784.6358 L39.5,799.6358 " fill="none" filter="url(#fz7syh0ll46by)" style="stroke: #A80036; stroke-width: 2.0;"/><rect fill="#FEFECE" filter="url(#fz7syh0ll46by)" height="33.0679" style="stroke: #A80036; stroke-width: 1.5;" width="83" x="130" y="89.5158"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="69" x="137" y="111.4818">WebClient</text><rect fill="#FEFECE" filter="url(#fz7syh0ll46by)" height="33.0679" style="stroke: #A80036; stroke-width: 1.5;" width="83" x="130" y="720.5679"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="69" x="137" y="742.5339">WebClient</text><rect fill="#FEFECE" filter="url(#fz7syh0ll46by)" height="33.0679" style="stroke: #A80036; stroke-width: 1.5;" width="57" x="464" y="89.5158"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="43" x="471" y="111.4818">Server</text><rect fill="#FEFECE" filter="url(#fz7syh0ll46by)" height="33.0679" style="stroke: #A80036; stroke-width: 1.5;" width="57" x="464" y="720.5679"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="43" x="471" y="742.5339">Server</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="63" x="659" y="123.4818">Database</text><path d="M675.5,72.5158 C675.5,62.5158 693.5,62.5158 693.5,62.5158 C693.5,62.5158 711.5,62.5158 711.5,72.5158 L711.5,98.5158 C711.5,108.5158 693.5,108.5158 693.5,108.5158 C693.5,108.5158 675.5,108.5158 675.5,98.5158 L675.5,72.5158 " fill="#FEFECE" filter="url(#fz7syh0ll46by)" style="stroke: #000000; stroke-width: 1.5;"/><path d="M675.5,72.5158 C675.5,82.5158 693.5,82.5158 693.5,82.5158 C693.5,82.5158 711.5,82.5158 711.5,72.5158 " fill="none" style="stroke: #000000; stroke-width: 1.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="63" x="659" y="735.5339">Database</text><path d="M675.5,749.6358 C675.5,739.6358 693.5,739.6358 693.5,739.6358 C693.5,739.6358 711.5,739.6358 711.5,749.6358 L711.5,775.6358 C711.5,785.6358 693.5,785.6358 693.5,785.6358 C693.5,785.6358 675.5,785.6358 675.5,775.6358 L675.5,749.6358 " fill="#FEFECE" filter="url(#fz7syh0ll46by)" style="stroke: #000000; stroke-width: 1.5;"/><path d="M675.5,749.6358 C675.5,759.6358 693.5,759.6358 693.5,759.6358 C693.5,759.6358 711.5,759.6358 711.5,749.6358 " fill="none" style="stroke: #000000; stroke-width: 1.5;"/><rect fill="#FEFECE" filter="url(#fz7syh0ll46by)" height="33.0679" style="stroke: #A80036; stroke-width: 1.5;" width="121" x="738" y="89.5158"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="107" x="745" y="111.4818">External Service</text><rect fill="#FEFECE" filter="url(#fz7syh0ll46by)" height="33.0679" style="stroke: #A80036; stroke-width: 1.5;" width="121" x="738" y="720.5679"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="107" x="745" y="742.5339">External Service</text><polygon fill="#A80036" points="161.5,157.2898,171.5,161.2898,161.5,165.2898,165.5,161.2898" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="26.5" x2="167.5" y1="161.2898" y2="161.2898"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="123" x="33.5" y="155.4808">opens "Create AREA"</text><polygon fill="#A80036" points="482.5,188.9958,492.5,192.9958,482.5,196.9958,486.5,192.9958" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="173.5" x2="488.5" y1="192.9958" y2="192.9958"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="297" x="180.5" y="187.1868">POST /areas {action, reactions, config, credentials}</text><polygon fill="#A80036" points="681.5,220.7018,691.5,224.7018,681.5,228.7018,685.5,224.7018" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="494.5" x2="687.5" y1="224.7018" y2="224.7018"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="128" x="501.5" y="218.8928">validate &amp; store AREA</text><polygon fill="#A80036" points="505.5,252.4078,495.5,256.4078,505.5,260.4078,501.5,256.4078" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="499.5" x2="692.5" y1="256.4078" y2="256.4078"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="43" x="511.5" y="250.5988">area_id</text><polygon fill="#A80036" points="184.5,284.1138,174.5,288.1138,184.5,292.1138,180.5,288.1138" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="178.5" x2="493.5" y1="288.1138" y2="288.1138"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="127" x="190.5" y="282.3048">201 Created {area_id}</text><polygon fill="#A80036" points="37.5,315.8199,27.5,319.8199,37.5,323.8199,33.5,319.8199" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="31.5" x2="172.5" y1="319.8199" y2="319.8199"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="114" x="43.5" y="314.0109">show AREA created</text><rect fill="#EEEEEE" filter="url(#fz7syh0ll46by)" height="3" style="stroke: #EEEEEE; stroke-width: 1.0;" width="890" x="3" y="349.6729"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="893" y1="349.6729" y2="349.6729"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="893" y1="352.6729" y2="352.6729"/><rect fill="#EEEEEE" filter="url(#fz7syh0ll46by)" height="25.706" style="stroke: #000000; stroke-width: 2.0;" width="163" x="366.5" y="337.8199"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="146" x="372.5" y="355.7169">Later: Hook execution</text><polygon fill="#A80036" points="788.5,393.2319,798.5,397.2319,788.5,401.2319,792.5,397.2319" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="494.5" x2="794.5" y1="397.2319" y2="397.2319"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="216" x="501.5" y="391.4229">poll /webhook or API for new events</text><polygon fill="#A80036" points="505.5,424.9379,495.5,428.9379,505.5,432.9379,501.5,428.9379" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="499.5" x2="799.5" y1="428.9379" y2="428.9379"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="85" x="511.5" y="423.1289">event payload</text><polygon fill="#A80036" points="681.5,456.6439,691.5,460.6439,681.5,464.6439,685.5,460.6439" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="494.5" x2="687.5" y1="460.6439" y2="460.6439"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="175" x="501.5" y="454.8349">find matching areas for event</text><polygon fill="#A80036" points="505.5,488.3499,495.5,492.3499,505.5,496.3499,501.5,492.3499" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="499.5" x2="692.5" y1="492.3499" y2="492.3499"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="52" x="511.5" y="486.5409">areas list</text><path d="M444,507.3499 L507,507.3499 L507,516.3499 L497,526.3499 L444,526.3499 L444,507.3499 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="197.218" style="stroke: #000000; stroke-width: 2.0;" width="439" x="444" y="507.3499"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="459" y="522.247">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="82" x="522" y="521.1089">[area.enabled]</text><path d="M454,534.056 L527,534.056 L527,543.056 L517,553.056 L454,553.056 L454,534.056 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="114.8241" style="stroke: #000000; stroke-width: 2.0;" width="419" x="454" y="534.056"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="28" x="469" y="548.953">loop</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="104" x="542" y="547.8149">[for each reaction]</text><polygon fill="#A80036" points="788.5,573.468,798.5,577.468,788.5,581.468,792.5,577.468" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="494.5" x2="794.5" y1="577.468" y2="577.468"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="228" x="501.5" y="571.659">call REAction API with mapped params</text><polygon fill="#A80036" points="505.5,605.174,495.5,609.174,505.5,613.174,501.5,609.174" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="499.5" x2="799.5" y1="609.174" y2="609.174"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="42" x="511.5" y="603.365">200 OK</text><polygon fill="#A80036" points="681.5,636.88,691.5,640.88,681.5,644.88,685.5,640.88" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="494.5" x2="687.5" y1="640.88" y2="640.88"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="81" x="501.5" y="635.071">log execution</text><line style="stroke: #000000; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="444" x2="883" y1="656.88" y2="656.88"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="75" x="449" y="668.6389">[not enabled]</text><polygon fill="#A80036" points="681.5,692.5679,691.5,696.5679,681.5,700.5679,685.5,696.5679" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="494.5" x2="687.5" y1="696.5679" y2="696.5679"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="39" x="501.5" y="690.7589">ignore</text><!--MD5=[91a26b9875b775e42af3ac3cd9643dbb]
@startuml
title AREA Creation and Execution Sequence
actor User
participant WebClient
participant Server
database Database
participant "External Service" as ES

User -> WebClient: opens "Create AREA"
WebClient -> Server: POST /areas {action, reactions, config, credentials}
Server -> Database: validate & store AREA
Database - -> Server: area_id
Server - -> WebClient: 201 Created {area_id}
WebClient - -> User: show AREA created

== Later: Hook execution ==
Server -> ES: poll /webhook or API for new events
ES - -> Server: event payload
Server -> Database: find matching areas for event
Database - -> Server: areas list
alt area.enabled
    loop for each reaction
        Server -> ES: call REAction API with mapped params
        ES - -> Server: 200 OK
        Server -> Database: log execution
    end
else not enabled
    Server -> Database: ignore
end
@enduml

PlantUML version 1.2020.02(Sun Mar 01 11:22:07 CET 2020)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Java Version: 21.0.8+9-Ubuntu-0ubuntu124.04.1
Operating System: Linux
Default Encoding: UTF-8
Language: en
Country: US
--></g></svg>